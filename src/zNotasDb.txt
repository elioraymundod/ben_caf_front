create table umg_beneficio_cafe.bc_roles(
	id_rol uuid not null,
	nombre_rol varchar(25) not null,
	constraint pk_roles primary key (id_rol)
);

create table umg_beneficio_cafe.bc_usuarios(
	id_usuario uuid not null,
	nombre_usuario varchar(50) not null,
	correo_usuario varchar(50) not null,
	password_usuario varchar(255) not null,
	constraint pk_usuarios primary key (id_usuario)
);

create table umg_beneficio_cafe.bc_usuarios_roles(
	id_user_role uuid not null,
	usuario uuid not null,
	rol uuid not null,
	constraint pk_us_rol primary key (id_user_role),
	constraint fk_us_rol_us foreign key (usuario) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_us_rol_ro foreign key (rol) references umg_beneficio_cafe.bc_roles(id_rol)
	
);

create table umg_beneficio_cafe.bc_estados(
	id_estado uuid not null,
	descripcion varchar(50) not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_estados primary key (id_estado),
	constraint fk_estados_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_estados_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);

create table umg_beneficio_cafe.bc_transportes(
	placa_transporte varchar(15) not null,
	marca varchar(30) not null,
	color varchar(30) not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_transportes primary key (placa_transporte),
	constraint fk_transpo_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_transpo_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);

create table umg_beneficio_cafe.bc_pilotos(
	licencia_piloto varchar(15) not null,
	nombre varchar(30) not null,
	celular varchar(10) not null,
	correo varchar(10) not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_piliotos primary key (licencia_piloto),
	constraint fk_pilotos_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_pilotos_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);

create table umg_beneficio_cafe.bc_solicitudes(
	id_solicitud uuid not null,
	estado_solicitud uuid not null,
	placa varchar(15) not null,
	cantidad_parcialidades int4 not null,
	piloto varchar(15) not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_solicitudes primary key (id_solicitud),
	constraint fk_soli_transportes foreign key (placa) references umg_beneficio_cafe.bc_transportes(placa_transporte),
	constraint fk_soli_pilotos foreign key (piloto) references umg_beneficio_cafe.bc_pilotos(licencia_piloto),
	constraint fk_soli_estados foreign key (estado_solicitud) references umg_beneficio_cafe.bc_estados(id_estado),
	constraint fk_solicit_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_solicit_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);

create table umg_beneficio_cafe.bc_rechazos(
	id_rechazo uuid not null,
	solicitud uuid not null,
	observaciones varchar(300) not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_rechazos primary key (id_rechazo),
	constraint fk_recha_soli foreign key (solicitud) references umg_beneficio_cafe.bc_solicitudes(id_solicitud),
	constraint fk_rechazo_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_rechazo_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);

create table umg_beneficio_cafe.bc_cuentas(
	id_cuenta uuid not null,
	no_cuenta varchar(15) not null,
	estado uuid not null,
	solicitud uuid not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_cuentas primary key (id_cuenta),
	constraint fk_cuent_estados foreign key (estado) references umg_beneficio_cafe.bc_estados(id_estado),
	constraint fk_cuent_solicit foreign key (solicitud) references umg_beneficio_cafe.bc_solicitudes(id_solicitud),
	constraint fk_cuentas_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_cuentas_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);

create table umg_beneficio_cafe.bc_parcialidades(
	id_parcialidad uuid not null,
	solicitud uuid not null,
	peso_enviado float8 not null,
	placa varchar(15) not null,
	piloto varchar(15) not null, 
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_parcialidades primary key (id_parcialidad),
	constraint fk_parciali_soli foreign key (solicitud) references umg_beneficio_cafe.bc_solicitudes(id_solicitud),
	constraint fk_parciali_tran foreign key (placa) references umg_beneficio_cafe.bc_transportes(placa_transporte),
	constraint fk_parciali_pilo foreign key (piloto) references umg_beneficio_cafe.bc_pilotos(licencia_piloto),
	constraint fk_parciali_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_parciali_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);


create table umg_beneficio_cafe.bc_pesajes_bascula(
	id_pesaje uuid not null,
	parcialidad uuid not null,
	peso float8 not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_pesajes_bascula primary key (id_pesaje),
	constraint fk_pesaj_parcialid foreign key (parcialidad) references umg_beneficio_cafe.bc_parcialidades(id_parcialidad),
	constraint fk_pesaj_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_pesaj_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);

create table umg_beneficio_cafe.bc_impresiones_bascula(
	id_impresion uuid not null,
	pesaje uuid not null,
	usuario_imprimio varchar(25) not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_impresion_basc primary key (id_impresion),
	constraint fk_impresi_pesaje foreign key (pesaje) references umg_beneficio_cafe.bc_pesajes_bascula(id_pesaje),
	constraint fk_impresi_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_impresi_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);

create table umg_beneficio_cafe.bc_anexos(
	id_anexo uuid not null,
	solicitud uuid not null,
	observaciones varchar(300) not null,
	sobrante_faltante varchar(1) not null,
	usuario_creacion uuid not null,
	fecha_creacion timestamp not null,
	usuario_modificacion uuid null,
	fecha_modificacion timestamp null,
	constraint pk_anexos primary key (id_anexo),
	constraint fk_anex_solic foreign key (solicitud) references umg_beneficio_cafe.bc_solicitudes(id_solicitud),
	constraint fk_anex_usu_crea foreign key (usuario_creacion) references umg_beneficio_cafe.bc_usuarios(id_usuario),
	constraint fk_anex_usu_modi foreign key (usuario_modificacion) references umg_beneficio_cafe.bc_usuarios(id_usuario)
);



